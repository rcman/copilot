      - name: Build with Docker-based PDP-11 toolchain (fallback)
        if: steps.toolchain-check.outputs.toolchain_found != 'true'
        env:
          WORKDIR: ${{ github.workspace }}
        run: |
          echo "No local toolchain found; attempting Docker-based build using retrobrew/pdp11"
          docker pull retrobrew/pdp11:latest || true
          echo "Available docker images (debug):"
          docker images | head -n 20
          # Run container mounting the repository workspace and capture its output to a file so CI will upload it.
          mkdir -p out
          docker run --rm -v "${WORKDIR}":/work -w /work retrobrew/pdp11:latest /bin/sh -c "ls -la /work && make -j$(nproc)" > out/make.log 2>&1 || true
          echo "=== end of container build output ==="
          echo "Saved container output to out/make.log"
